#!/bin/bash

# substitute spaces
# plus sign + 
WORD_PLUS=$(echo $WORD | sed 's/ /+/g')
# minus sign -
WORD_MINUS=$(echo $WORD | sed 's/ /-/g')
# percent encoding %20
WORD_PERC=$(echo $WORD | sed 's/ /%20/g')

# websites 
AMAZON_DE="https://www.amazon.de/s?k="
EBAY_DE="https://www.ebay.de/sch/i.html?_nkw="
EBAY_KL="https://www.ebay-kleinanzeigen.de/s-"
EBAY_LOWEST_PRICE="&_sop=15"
EBAY_END_SOONEST="&_sop=1"
EBAY_AUCTION="&LH_Auction=1"
MEDIMOPS="https://www.medimops.de/produkte-C0/?listorder=asc&listorderby=oxvarminprice&searchparam="
REBUY="https://www.rebuy.de/kaufen/suchen?q="
REBUY_LOWEST_PRICE="&sortBy=price_asc"
WOB="https://www.wob.com/de-de/kategorie/alle?search="

IFS=';'; WORDS=($(zenity --entry))

for WORD in "${WORDS[@]}"
do
  [ -z $WORD ] && exit ||
  xdg-open $AMAZON_DE$WORD_PLUS
  xdg-open $EBAY_DE$WORD_PLUS$EBAY_LOWEST_PRICE
  xdg-open $EBAY_DE$WORD_PLUS$EBAY_END_SOONEST$EBAY_AUCTION
  xdg-open $EBAY_KL$WORD_MINUS/k0
  xdg-open $MEDIMOPS$WORD_PLUS
  xdg-open $REBUY$WORD_PERC$REBUY_LOWEST_PRICE
  xdg-open $WOB$WORD_PERC

  sleep 1
done
